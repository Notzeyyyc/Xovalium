<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="A new web page" />
        <meta name="robots" content="index, follow" />
        <link rel="stylesheet" href="./fonts.css">
        <link rel="stylesheet" href="./transitions.css">
        <link rel="stylesheet" href="./css/toast.css">
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
        <script src="./transitions.js" defer></script>
        <script src="./js/toast.js" defer></script>
        <script src="./js/common.js" defer></script>
        <script src="../backend/antiClick.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        <title>XOvalium Dashboard</title>
        <script>
            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    const res = await fetch('/api/user/me');
                    const data = await res.json();
                    if (data.success) {
                        const user = data.user;
                        document.getElementById('userDisplay').innerHTML = `
                            <div class="flex items-center gap-2 mt-4 flex-wrap">
                                <div class="flex items-center gap-2 bg-white/5 border border-white/10 px-3 py-1.5 rounded-full">
                                    <span class="w-2 h-2 rounded-full ${user.role === 'owner' ? 'bg-amber-500' : 'bg-green-500'} animate-pulse"></span>
                                    <span class="text-[10px] font-bold uppercase tracking-wider text-gray-400">${user.role}</span>
                                    <span class="text-[10px] text-gray-600">|</span>
                                    <span class="text-[10px] font-mono text-gray-500">${user.telegramId}</span>
                                </div>
                            </div>
                        `;
                    }
                    
                    // Show banner
                    const appRes = await fetch('/api/app/info');
                    const appData = await appRes.json();
                    if (appData.success && appData.notification && appData.notification.message) {
                        const notif = appData.notification;
                        const banner = document.getElementById('notifBanner');
                        banner.className = `p-3 mb-6 rounded-xl border text-sm font-medium animate-slide-up flex items-center gap-2 ${
                            notif.type === 'success' ? 'bg-green-500/10 border-green-500/20 text-green-400' :
                            notif.type === 'error' ? 'bg-red-500/10 border-red-500/20 text-red-400' :
                            notif.type === 'warning' ? 'bg-yellow-500/10 border-yellow-500/20 text-yellow-400' :
                            'bg-blue-500/10 border-blue-500/20 text-blue-400'
                        }`;
                        banner.innerHTML = `<span class="material-symbols-outlined text-lg">campaign</span> ${notif.message}`;
                    }
                } catch(e) {}
            });
        </script>
        <style type="text/tailwindcss">
            @theme {
                /* Base */
                --color-background: #000000; /* deep charcoal */
                --color-surface: #101010; /* slightly lighter panel */
                --color-surface-alt: #242424; /* alt surface untuk layering */
                --color-text: #e5e5e5; /* soft white */
                --color-text-secondary: #9ca3af; /* cool gray */

                /* Accent modern */
                --color-accent-cyan: #06b6d4; /* cyan neon */
                --color-accent-violet: #7c3aed; /* violet vibrant */
                --color-accent-lime: #84cc16; /* lime fresh */

                /* Status */
                --color-error: #f87171; /* soft red */
                --color-warning: #fbbf24; /* amber */
                --color-success: #34d399; /* emerald */

                /* Extra modern touch */
                --color-border: #0f0f0f; /* subtle border */
                --color-highlight: #3b82f6; /* electric blue highlight */
            }
        </style>
    </head>
    <body class="bg-background min-h-screen text-white overflow-x-hidden">
        
        <!-- Header / Glass Top Bar -->
        <div class="sticky top-0 z-40 bg-background/60 backdrop-blur-xl border-b border-white/5 px-6 py-4 flex justify-between items-center">
          <div>
            <h1 class="text-xl bbh-hegarty-regular text-white tracking-tight">XOvalium</h1>
            <p class="text-[10px] font-mono text-accent-cyan/80 uppercase tracking-widest">System Online</p>
          </div>
          <div id="adminContainer"></div>
        </div>

    <!-- Scrollable Content -->
    <div class="pb-32 px-6 pt-6 max-w-2xl mx-auto min-h-screen">
          
          <!-- Notif Banner Section -->
          <div id="notifBanner" class="empty:hidden mb-6"></div>

          <!-- Hero Image Card -->
          <div class="relative group rounded-3xl overflow-hidden shadow-2xl mb-8 animate-slide-up">
            <img src="https://files.catbox.moe/ghoe10.png" alt="Hero" class="w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-110">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80"></div>
            <div class="absolute bottom-6 left-6">
              <span class="bg-accent-violet/20 border border-accent-violet/30 text-accent-violet text-[10px] px-2 py-0.5 rounded-full font-bold uppercase mb-2 inline-block">Premium Core</span>
              <h2 class="text-2xl font-bold text-white leading-tight">Elite Infrastructure</h2>
            </div>
          </div>

          <!-- User Stats Section -->
          <div id="userDisplay" class="mb-8 animate-slide-up delay-100"></div>

          <!-- Main Grid -->
          <div class="grid grid-cols-2 gap-4 mb-8">
            <!-- Status Card -->
            <div class="bg-surface-alt/40 border border-white/5 p-4 rounded-2xl hover:bg-surface-alt/60 transition-all group animate-slide-up delay-200">
               <div class="w-10 h-10 bg-pink-500/10 rounded-xl flex items-center justify-center text-pink-500 mb-3 group-hover:scale-110 transition-transform">
                 <span class="material-symbols-outlined">developer_board</span>
               </div>
               <p class="text-[10px] text-gray-500 font-bold uppercase">System Status</p>
               <p class="text-white text-sm font-semibold mt-1">Production</p>
            </div>

            <!-- Version Card -->
            <div class="bg-surface-alt/40 border border-white/5 p-4 rounded-2xl hover:bg-surface-alt/60 transition-all group animate-slide-up delay-300">
               <div class="w-10 h-10 bg-accent-cyan/10 rounded-xl flex items-center justify-center text-accent-cyan mb-3 group-hover:scale-110 transition-transform">
                 <span class="material-symbols-outlined">auto_awesome</span>
               </div>
               <p class="text-[10px] text-gray-500 font-bold uppercase">Engine v1.2</p>
               <p class="text-white text-sm font-semibold mt-1 text-accent-cyan">Stable Rev</p>
            </div>

            <!-- Language Card -->
            <div class="bg-surface-alt/40 border border-white/5 p-4 rounded-2xl hover:bg-surface-alt/60 transition-all group animate-slide-up delay-400">
               <div class="w-10 h-10 bg-accent-lime/10 rounded-xl flex items-center justify-center text-accent-lime mb-3 group-hover:scale-110 transition-transform">
                 <span class="material-symbols-outlined">public</span>
               </div>
               <p class="text-[10px] text-gray-500 font-bold uppercase">Region</p>
               <p class="text-white text-sm font-semibold mt-1">ID / Jakarta</p>
            </div>

            <!-- ID Kernel Card -->
            <div class="bg-surface-alt/40 border border-white/5 p-4 rounded-2xl hover:bg-surface-alt/60 transition-all group animate-slide-up delay-500">
               <div class="w-10 h-10 bg-amber-500/10 rounded-xl flex items-center justify-center text-amber-500 mb-3 group-hover:scale-110 transition-transform">
                 <span class="material-symbols-outlined">token</span>
               </div>
               <p class="text-[10px] text-gray-500 font-bold uppercase">Kernel ID</p>
               <p class="text-white text-sm font-semibold mt-1">HEN-0126</p>
            </div>
          </div>

          <!-- Bottom Branding -->
          <div class="text-center py-6 opacity-30 animate-fade-in delay-700">
            <p class="text-[10px] font-mono tracking-widest text-white">XOVALIUM TECHNOLOGY Â© 2025</p>
          </div>
      </div>

    <!-- Navigation Bar (Glass Floating) -->
    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50">
          <nav class="bg-white/5 backdrop-blur-2xl border border-white/10 rounded-3xl px-8 py-4 flex justify-between items-center shadow-2xl">
            <a href="index.html" class="flex flex-col items-center gap-1 group active:scale-90 transition-transform">
              <span class="material-symbols-outlined text-accent-cyan text-2xl group-hover:drop-shadow-[0_0_8px_rgba(6,182,212,0.8)]">home</span>
              <span class="text-[8px] font-bold text-accent-cyan uppercase">Home</span>
            </a>
            <a href="blast.html" class="flex flex-col items-center gap-1 group active:scale-90 transition-transform opacity-50 hover:opacity-100 transition-opacity">
              <span class="material-symbols-outlined text-white text-2xl">smart_toy</span>
              <span class="text-[8px] font-bold text-white uppercase">Blast</span>
            </a>
            <a href="membership.html" class="flex flex-col items-center gap-1 group active:scale-90 transition-transform opacity-50 hover:opacity-100 transition-opacity">
              <span class="material-symbols-outlined text-white text-2xl">star_half</span>
              <span class="text-[8px] font-bold text-white uppercase">VIP</span>
            </a>
            <a href="settings.html" class="flex flex-col items-center gap-1 group active:scale-90 transition-transform opacity-50 hover:opacity-100 transition-opacity">
              <span class="material-symbols-outlined text-white text-2xl">tune</span>
              <span class="text-[8px] font-bold text-white uppercase">Setup</span>
            </a>
          </nav>
        </div>


      <style>
        .custom-scrollbar::-webkit-scrollbar { width: 0px; }
        @keyframes slide-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up { animation: slide-up 0.6s ease-out forwards; }
        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-700 { animation-delay: 0.7s; }
      </style>

      <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Check User
                const res = await fetch('/api/user/me');
                const data = await res.json();
                if (data.success) {
                    const user = data.user;
                    
                    // Admin Container
                    if (user.role === 'owner') {
                        document.getElementById('adminContainer').innerHTML = `
                            <a href="/admin/index.html" class="w-10 h-10 rounded-full border border-indigo-500/30 bg-indigo-500/10 flex items-center justify-center text-indigo-400 hover:bg-indigo-500/20 transition-all">
                                <span class="material-symbols-outlined text-xl">admin_panel_settings</span>
                            </a>
                        `;
                    }

                    document.getElementById('userDisplay').innerHTML = `
                        <div class="bg-gradient-to-br from-white/5 to-transparent border border-white/10 p-5 rounded-3xl relative overflow-hidden group">
                            <div class="absolute -right-4 -top-4 w-20 h-20 bg-accent-cyan/10 blur-[40px] rounded-full group-hover:bg-accent-cyan/20 transition-all"></div>
                            <div class="flex items-center gap-4">
                                <div class="w-14 h-14 rounded-2xl bg-surface-alt flex items-center justify-center border border-white/10 shadow-inner">
                                    <img src="https://ui-avatars.com/api/?name=${user.telegramId}&background=random" class="w-10 h-10 rounded-xl" />
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center gap-2">
                                        <p class="text-white font-bold tracking-tight">${user.telegramId}</p>
                                        <span class="px-2 py-0.5 rounded-md ${user.role === 'owner' ? 'bg-amber-500/20 text-amber-500' : 'bg-green-500/20 text-green-500'} text-[8px] font-black uppercase">${user.role}</span>
                                    </div>
                                    <p class="text-gray-500 text-[10px] font-mono mt-0.5">XOV-CORE-IDENTIFIED</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                // Show banner
                const appRes = await fetch('/api/app/info');
                const appData = await appRes.json();
                if (appData.success && appData.notification && appData.notification.message) {
                    const notif = appData.notification;
                    const banner = document.getElementById('notifBanner');
                    banner.className = `p-4 rounded-2xl border text-[11px] font-medium animate-slide-up flex items-center gap-3 transition-all ${
                        notif.type === 'success' ? 'bg-green-500/10 border-green-500/20 text-green-400' :
                        notif.type === 'error' ? 'bg-red-500/10 border-red-500/20 text-red-400' :
                        notif.type === 'warning' ? 'bg-amber-500/10 border-amber-500/20 text-amber-500' :
                        'bg-blue-500/10 border-blue-500/20 text-blue-400'
                    }`;
                    banner.innerHTML = `<span class="material-symbols-outlined text-lg">campaign</span> <span>${notif.message}</span>`;
                }
            } catch(e) {}
        });
      </script>
    </body>
</html>
